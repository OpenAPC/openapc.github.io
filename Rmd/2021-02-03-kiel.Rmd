---
layout:     post
author:     Christoph Broschinski
title:      University of Kiel joins OpenAPC
date:       2021-02-04 09:00:00
summary:    
categories: [general, openAPC]
comments: true
---


```{r, echo =FALSE}
knitr::opts_knit$set(base.url = "/")
knitr::opts_chunk$set(
  comment = "#>",
  collapse = TRUE,
  warning = FALSE, 
  message = FALSE,
  echo = FALSE,
  fig.width = 9,
  fig.height = 6
)
options(scipen = 1, digits = 2)
knitr::knit_hooks$set(inline = function(x) {
  prettyNum(x, big.mark=" ")
})
```

We welcome the [](https://www.hu-berlin.de/) (HU Berlin) as new contributing institution!

The [University Library of HU Berlin](https://www.ub.hu-berlin.de/en?set_language=en) is in charge of the [University's Open Access Publishing Fund](https://www.ub.hu-berlin.de/de/forschen-publizieren/open-access/foerdermoeglichkeiten/finanzierung/publikationsfonds?set_language=de), which is supported under the [DFG's Open Access Publishing Programme](http://www.dfg.de/en/research_funding/programmes/infrastructure/lis/funding_opportunities/open_access/).

Institutional contact for the data set is the [HU Library Open Access Team](mailto:openaccess@ub.hu-berlin.de).

## About the data set

The initial data set contributed by the HU Berlin contains information on publication fees paid in 2018. Please note that the data originates not only from the institutional DFG Publication Fund, but also from other OA funds at HU Berlin. 

## Cost Data

```{r, cache.lazy = TRUE}
#' Download APC spreadsheet from github which requires to Curl installed

download_apc <- function(path = NULL, dir = "tmp", file = "apc_de.csv"){
  if(is.null(path)) {
    path <- c("https://raw.githubusercontent.com/OpenAPC/openapc-de/master/data/apc_de.csv")
    } 
  dir.create(dir) 
  download.file(url = path, destfile = paste(dir, file, sep = "/"), method = "curl")
  read.csv(paste(dir, file, sep = "/"), header = T,sep =",")
}

my.apc <- download_apc()
my.apc <- my.apc[my.apc$institution == "HU Berlin",]
my.apc <- droplevels(my.apc)
```

The data covers publication fees for `r format(nrow(my.apc), big.mark =",")` articles. Total expenditure amounts to `r sum(my.apc$euro)`€ and the average fee is `r sum(my.apc$euro)/nrow(my.apc)`€.

The following table and plots provide an overview:

```{r}
d_frame = data.frame(table(my.apc$publisher,  dnn="Publisher"))                 
d_frame = d_frame[with(d_frame, order(-Freq, Publisher)), ]                                           
                                    
my.apc$publisher <- factor(my.apc$publisher, levels =  d_frame$Publisher)

df.summary <-cbind(tapply(my.apc$euro, my.apc$publisher, length),
             tapply(my.apc$euro, my.apc$publisher, sum),
             tapply(my.apc$euro, my.apc$publisher, mean))

colnames(df.summary) <- c("Articles", "Fees paid in EURO", "Mean Fee paid")

knitr::kable(as.data.frame(df.summary), digits = 2)
```

### Fees paid per publisher (in EURO)

```{r tree_huberlin_2019_05_02_full}
tt <- aggregate(my.apc$euro, by = list(my.apc$publisher), sum)
colnames(tt) <- c("Publisher", "Euro")
treemap::treemap(tt, index = c("Publisher"), vSize = "Euro", palette = "Paired")
```

###  Average costs per publisher (in EURO)

```{r box_huberlin_2019_05_02_publisher_full, echo = FALSE, message = FALSE}
require(ggplot2)
d_frame = data.frame(table(my.apc$publisher,  dnn="Publisher"))                 
d_frame = d_frame[with(d_frame, order(-Freq, Publisher)), ]
publishers = as.character(d_frame$Publisher[d_frame$Freq > 0])
my.apc_reduced = my.apc[my.apc$publisher %in% publishers,]

  
q <- ggplot(my.apc_reduced, aes(publisher, euro)) + geom_boxplot() + geom_point()
q <- q +  ylab("Fees paid (in EURO)") + theme(legend.position="top") + theme_bw(base_size = 18) + coord_flip()
q + xlab("Publisher") + ylab("APC")
```
