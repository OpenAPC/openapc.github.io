---
layout:     post
author:     Julia Bartlewski
author_lnk: https://github.com/jbartlewski
title:      Couperin.org provides additional APC data for 21 institutions
date:       2022-07-27 09:00:00
summary:    
categories: [general, openAPC]
comments: true
---


```{r, echo = FALSE}
knitr::opts_knit$set(base.url = "/")
knitr::opts_chunk$set(
  comment = "#>",
  collapse = TRUE,
  warning = FALSE, 
  message = FALSE,
  echo = FALSE,
  fig.width = 9,
  fig.height = 6
)
options(scipen = 1, digits = 2)
knitr::knit_hooks$set(inline = function(x) {
  prettyNum(x, big.mark=",")
})
```

The [Couperin consortium](https://couperin.org) collects data on APC expenditures from universities and other research institutions in France. 

APC expenditures for 21 different institutions have now been made available to OpenAPC, with two institutions being included for the first time.

Contact Persons for Couperin are [Valerie Larroque](mailto:valerie.larroque@couperin.org) and [Sandrine Malotaux](mailto:sandrine.malotaux@inp-toulouse.fr).

## Cost data

```{r, cache.lazy = TRUE}
#' Download APC spreadsheet from github which requires to Curl installed

download_apc <- function(path = NULL, dir = "tmp", file = "apc_de.csv"){
  if(is.null(path)) {
    path <- c("https://raw.githubusercontent.com/OpenAPC/openapc-de/master/data/apc_de.csv")
    } 
  dir.create(dir) 
  download.file(url = path, destfile = paste(dir, file, sep = "/"), method = "curl")
  read.csv(paste(dir, file, sep = "/"), header = T,sep =",")
}

my.apc <- download_apc()
my.apc <- my.apc[161427:162692,]

my.apc$publisher <- gsub("American Society for Biochemistry & Molecular Biology \\(ASBMB\\)", "ASBMB", my.apc$publisher)
my.apc$publisher <- gsub("Institute of Electrical & Electronics Engineers \\(IEEE\\)", "IEEE", my.apc$publisher)
my.apc$publisher <- gsub("American Association for the Advancement of Science \\(AAAS\\)", "AAAS", my.apc$publisher)
my.apc <- my.apc[my.apc$institution != "",]
my.apc <- droplevels(my.apc)

```

The new data set provided by Couperin covers publication fees for `r format(nrow(my.apc), big.mark =",")` articles. Total expenditure amounts to `r sum(my.apc$euro)`€ and the average fee is `r sum(my.apc$euro)/nrow(my.apc)`€.

The data originates from the following institutions:

- Université de Caen Normandie
- Ecole centrale de Lyon
- CHU de Rennes
- Université Clermont Auvergne
- ENGEES
- Université de Haute-Alsace
- IFREMER
- INRIA
- INSA Strasbourg
- INSERM
- Institut de recherche pour le développement (IRD)
- ISARA
- Le Mans Université
- Laboratoire national de métrologie et d'essais - LNE 
- Museum National d'Histoire Naturelle
- La Rochelle Université
- Université Savoie Mont Blanc
- Université de Tours
- Université de Bretagne-Sud
- Université de Nîmes (**new**)
- Université de Rennes 2 (**new**)



## Overview

A detailed analysis of the contributed data sets provides the following overview:

### Breakdown by publisher

```{r}
d_frame = data.frame(table(my.apc$publisher,  dnn="Publisher"))                 
d_frame = d_frame[with(d_frame, order(-Freq, Publisher)), ]                                           
                                    
my.apc$publisher <- factor(my.apc$publisher, levels =  d_frame$Publisher)

df.summary <-cbind(tapply(my.apc$euro, my.apc$publisher, length),
             tapply(my.apc$euro, my.apc$publisher, sum),
             tapply(my.apc$euro, my.apc$publisher, mean))

colnames(df.summary) <- c("Articles", "Fees paid in EURO", "Mean Fee paid")

knitr::kable(as.data.frame(df.summary), digits = 2)
```

### Fees paid per publisher (in EURO)

```{r tree_couperin_2022_07_27_full}
tt <- aggregate(my.apc$euro, by = list(my.apc$publisher), sum)
colnames(tt) <- c("Publisher", "Euro")
treemap::treemap(tt, index = c("Publisher"), vSize = "Euro", palette = "Paired")
```

###  Average costs per publisher (in EURO)

```{r box_couperin_2022_07_27_publisher_full, echo = FALSE, message = FALSE}
require(ggplot2)
d_frame = data.frame(table(my.apc$publisher,  dnn="Publisher"))                 
d_frame = d_frame[with(d_frame, order(-Freq, Publisher)), ]
publishers = as.character(d_frame$Publisher[d_frame$Freq > 5])
my.apc_reduced = my.apc[my.apc$publisher %in% publishers,]

  
q <- ggplot(my.apc_reduced, aes(publisher, euro)) + geom_boxplot() + geom_point()
q <- q +  ylab("Fees paid (in EURO)") + theme(legend.position="top") + theme_bw(base_size = 18) + coord_flip()
q + xlab("Publisher (> 5 articles)") + ylab("APC")
```
